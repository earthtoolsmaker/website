{{ if .Site.Params.testimonials.enable }}
<!-- begin testimonials -->
<section class="section testimonials animate">
  <div class="container">
    <div class="row">
      <div class="col col-12">
        <div class="container__inner">

          {{ if .Site.Params.partners.enable }}
          <!-- begin partners carousel -->
          {{ if .Site.Params.partners.partners_title }}
          <div class="section__info partners__info">
            <div class="section__head">
              <h2 class="section__title">{{ .Site.Params.partners.partners_title | safeHTML }}</h2>
              <ul class="controls list-reset" id="partners-controls" aria-label="Partners Navigation" tabindex="0">
                <li class="prev" data-controls="prev" aria-controls="partners-slider" tabindex="-1">
                  <i class="fa-solid fa-arrow-left-long"></i>
                </li>
                <li class="next" data-controls="next" aria-controls="partners-slider" tabindex="-1">
                  <i class="fa-solid fa-arrow-right-long"></i>
                </li>
              </ul>
            </div>
            <svg xmlns="http://www.w3.org/2000/svg" width="52" height="12" fill="none"><path stroke="var(--accent-color)" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="m2 1.734 8 8 8-8 8 8 8-8 8 8 8-8"/></svg>
          </div>
          {{ end }}

          <div class="partners__carousel">
            <div class="partners-slider">
              {{ $partners := .Site.Params.partner_item }}
              {{ $perPageDesktop := 4 }}
              {{ $totalPartners := len $partners }}
              {{ $totalPages := int (math.Ceil (div (float $totalPartners) (float $perPageDesktop))) }}
              {{ range $pageIndex := seq $totalPages }}
                {{ $startIndex := mul (sub $pageIndex 1) $perPageDesktop }}
                {{ $endIndex := mul $pageIndex $perPageDesktop }}
                {{ $pagePartners := first $endIndex $partners | after $startIndex }}
                <div class="partners-page">
                  <div class="row">
                    {{ range $pagePartners }}
                      <div class="partner-item col col-3 col-t-4 col-m-6">
                        {{ if .link }}
                          <a href="{{ .link }}" target="_blank" rel="noopener noreferrer" class="partner-logo-container{{ with .bg }} partner-bg-{{ . }}{{ end }}"{{ if .show_name }} data-name="{{ .name }}"{{ end }}>
                            {{ if .logo }}
                              <img class="partner-logo" src="{{ .logo }}" alt="{{ .name }}" loading="lazy">
                            {{ end }}
                          </a>
                        {{ else }}
                          <div class="partner-logo-container{{ with .bg }} partner-bg-{{ . }}{{ end }}"{{ if .show_name }} data-name="{{ .name }}"{{ end }}>
                            {{ if .logo }}
                              <img class="partner-logo" src="{{ .logo }}" alt="{{ .name }}" loading="lazy">
                            {{ end }}
                          </div>
                        {{ end }}
                      </div>
                    {{ end }}
                  </div>
                </div>
              {{ end }}
            </div>
          </div>
          <!-- end partners carousel -->
          {{ end }}

          {{ if .Site.Params.testimonials.testimonial_title }}
          <div class="section__info testimonials__info">
            <div class="section__head">
              <h2 class="section__title">{{ .Site.Params.testimonials.testimonial_title | safeHTML }}</h2>
              <ul class="controls list-reset" id="customize-controls" aria-label="Slider Navigation" tabindex="0">
                <li class="prev" data-controls="prev" aria-controls="customize" tabindex="-1">
                  <i class="fa-solid fa-arrow-left-long"></i>
                </li>
                <li class="next" data-controls="next" aria-controls="customize" tabindex="-1">
                  <i class="fa-solid fa-arrow-right-long"></i>
                </li>
              </ul>
            </div>
            <svg xmlns="http://www.w3.org/2000/svg" width="52" height="12" fill="none"><path stroke="var(--accent-color)" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="m2 1.734 8 8 8-8 8 8 8-8 8 8 8-8"/></svg>
          </div>
          {{ end }}

          <div class="testimonials__slider my-slider">
          {{ with .Site.Params.testimonial_item }}
            {{ range . }}
              <div class="testimonial-item">
                <div class="testimonial-content">
                  <div class="client-meta">
                    {{ if .logo }}
                      <div class="client-logo">
                        <a href="{{ .link }}" target="_blank">
                          {{ $orgName := index (split .designation " - ") 1 }}
                          <img class="client-logo-image" src="{{ .logo }}" title="{{ $orgName }}" alt="{{ $orgName }}" />
                        </a>
                      </div>
                    {{ end }}
                    {{ if .image }}
                    <a href="{{ .link }}" class="image-container" target="_blank" rel="noopener" title="Visit {{ index (split .designation " - ") 1 }}">
                      <img class="client-avatar" src="{{ .image }}" alt="{{ .name }}" loading="lazy">
                    </a>
                    {{ end }}
                    <div class="client-info">
                      {{ if .name }}
                      <h3 class="client-name">
                      {{ if .link }}
                        <a href="{{ .link }}" target="_blank" rel="noopener">{{ .name }}</a>
                      {{ else }}
                        {{ .name }}
                      {{ end }}
                      {{ end }}
                      </h3>
                      {{ if .designation }}
                      <p class="client-designation">{{ .designation }}</p>
                      {{ end }}
                    </div>
                    {{ if .content }}
                    <p class="client-text">{{ .content }}</p>
                    {{ end }}
                    <svg xmlns="http://www.w3.org/2000/svg" class="stars-icon" width="104" height="19" fill="none"><path fill="#e59819" d="m9.999.418 2.245 6.91h7.265l-5.877 4.27 2.245 6.91-5.878-4.27-5.878 4.27 2.245-6.91-5.878-4.27h7.266L9.999.418ZM30.999.418l2.245 6.91h7.265l-5.877 4.27 2.245 6.91-5.878-4.27-5.878 4.27 2.245-6.91-5.878-4.27h7.266l2.245-6.91ZM51.999.418l2.245 6.91h7.265l-5.877 4.27 2.245 6.91-5.878-4.27-5.878 4.27 2.245-6.91-5.878-4.27h7.266l2.245-6.91ZM72.999.418l2.245 6.91h7.265l-5.877 4.27 2.245 6.91-5.878-4.27-5.878 4.27 2.245-6.91-5.878-4.27h7.266l2.245-6.91ZM93.999.418l2.245 6.91h7.265l-5.877 4.27 2.245 6.91-5.878-4.27-5.878 4.27 2.245-6.91-5.878-4.27h7.266l2.245-6.91Z"/></svg>
                  </div>
                </div>
              </div>
            {{ end }}
          {{ end }}
          </div>

        </div>

      </div>
    </div>
  </div>
</section>
<!-- end testimonials -->
{{ end }}
