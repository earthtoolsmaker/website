{{ define "main" }}

{{ if .Params.Image }}
<!-- begin hero image -->
<div class="hero__image">
  <div class="hero__image__inner">
    {{ $imgPath := strings.TrimPrefix "/" .Params.Image }}
    {{ partial "responsive-image.html" (dict
      "src" $imgPath
      "alt" .Title
      "sizes" "100vw"
      "widths" (slice 600 900 1200)
      "lazy" true
      "lqip" true
    ) }}
  </div>
</div>
<!-- end hero image -->
{{ end }}

<!-- begin page-wrapper -->
<div class="page-wrapper">

  <div class="container">
    <div class="page-wrapper__info">
      {{ if .Title }}
      <h1 class="page-info__title">{{ .Title }}</h1>
      {{ end }}
      {{ if .Description }}
      <p class="page-info__description">{{ .Description }}</p>
      {{ end }}
    </div>
  </div>

  <div class="container animate">
    <div class="row">
      {{ range (where .Site.RegularPages "Section" "projects" ) }}
      <article class="project col col-4 col-w-6 col-t-12">
        <div class="project__content">
          {{ if .Params.Image }}
          <div class="project__head">
            <div class="project__image">
              {{ $imgPath := strings.TrimPrefix "/" .Params.Image }}
              {{ partial "responsive-image.html" (dict
                "src" $imgPath
                "alt" .Params.Title
                "sizes" "(max-width: 600px) 100vw, (max-width: 900px) 50vw, 400px"
                "widths" (slice 400 600 800)
                "lazy" true
                "lqip" true
              ) }}
            </div>
          </div>
          {{ end }}
          <div class="project__inner">
            <div class="project__info">
              {{ if .Params.title }}
              <h3 class="project__title"><a href="{{ .RelPermalink }}" class="project__link">{{ .Params.title }}</a></h3>
              {{ end }}
              {{ if .Params.summary }}
              <p class="project__excerpt">{{ .Params.summary }}</p>
              {{ end }}
            </div>
          </div>
        </div>
      </article>
      {{ end }}
    </div>
  </div>

</div>
<!-- end page-wrapper -->

{{ end }}
